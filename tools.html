<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>الأدوات – PdfSwift</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<style>
body { font-family: 'Cairo', sans-serif; margin:0; padding:0; }
.tools-page { padding:4rem 1rem 2rem; }
.tool-selector { display:grid; grid-template-columns:repeat(auto-fit, minmax(160px,1fr)); gap:1.2rem; margin-bottom:3rem; }
.tool-btn { background:white; color:#1e40af; border:1px solid #e2e8f0; aspect-ratio:1/1; border-radius:16px; font-size:1rem; font-weight:600; cursor:pointer; transition:all 0.35s ease; box-shadow:0 4px 12px rgba(0,0,0,0.06); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:0.7rem; padding:1.2rem; position:relative; overflow:hidden; }
.tool-btn:hover { transform:translateY(-6px); box-shadow:0 12px 30px rgba(30,64,175,0.18); border-color:#1e40af; }
.tool-btn i { font-size:clamp(1.8rem,5vw,2.2rem); }
.tool-btn span { font-size:clamp(0.9rem,3vw,1rem); text-align:center; line-height:1.3; }
.coming-soon { position:absolute; bottom:8px; font-size:0.75rem; color:#dc2626; font-weight:500; background:rgba(220,38,38,0.1); padding:2px 10px; border-radius:12px; }
.tool-section { background:white; border-radius:16px; padding:2.5rem; margin:2rem auto; max-width:860px; box-shadow:0 10px 30px rgba(0,0,0,0.08); display:none; }
input, select, textarea { width:100%; padding:1rem; margin:1rem 0; border:1px solid #cbd5e1; border-radius:8px; font-size:1.05rem; }
.action-btn { background:#1e40af; color:white; border:none; padding:1rem 2.5rem; border-radius:50px; font-size:1.15rem; cursor:pointer; margin-top:1.5rem; transition:all 0.3s; }
.action-btn:hover { background:#1e3a8a; transform:translateY(-3px); }
.status { margin-top:1.5rem; font-weight:600; min-height:1.8rem; }
.header, .footer { background:#1e40af; color:white; padding:1rem; text-align:center; }
.header a, .footer a { color:white; text-decoration:none; }
.container { max-width:960px; margin:0 auto; }
</style>

<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

</head>
<body>

<header class="header"><div class="container"><a href="index.html" class="logo">Pdf<span>Swift</span></a></div></header>

<main class="container tools-page">
<h1 class="section-title">أدوات PDF محلية 100%</h1>
<p style="text-align:center; margin-bottom:3.5rem;">اختر الأداة – كل شيء يتم داخل متصفحك</p>

<div class="grid tool-selector">
  <button class="tool-btn" data-tool="merge"><i class="fas fa-object-group"></i><span>دمج ملفات</span></button>
  <button class="tool-btn" data-tool="split"><i class="fas fa-scissors"></i><span>تقسيم PDF</span></button>
  <button class="tool-btn" data-tool="rotate"><i class="fas fa-redo"></i><span>تدوير صفحات</span></button>
  <button class="tool-btn" data-tool="watermark"><i class="fas fa-stamp"></i><span>علامة مائية</span></button>

  <button class="tool-btn" data-tool="delete-pages"><i class="fas fa-trash-can"></i><span>حذف صفحات</span><span class="coming-soon">قريبًا</span></button>
  <button class="tool-btn" data-tool="extract-text"><i class="fas fa-file-lines"></i><span>استخراج النص</span><span class="coming-soon">قريبًا</span></button>
  <button class="tool-btn" data-tool="extract-images"><i class="fas fa-image"></i><span>استخراج صور</span><span class="coming-soon">قريبًا</span></button>
  <button class="tool-btn" data-tool="pdf-to-images"><i class="fas fa-images"></i><span>PDF إلى صور</span><span class="coming-soon">قريبًا</span></button>
</div>

<section id="tool-merge" class="tool-section">
<h2>دمج ملفات PDF</h2>
<input type="file" id="merge-files" multiple accept=".pdf">
<button id="btn-merge" class="action-btn">دمج الآن</button>
<div id="merge-status" class="status"></div>
</section>

<section id="tool-split" class="tool-section">
<h2>تقسيم / استخراج صفحات</h2>
<input type="file" id="split-file" accept=".pdf">
<input type="text" id="split-ranges" placeholder="مثال: 1-3,5">
<button id="btn-split" class="action-btn">استخراج الآن</button>
<div id="split-status" class="status"></div>
</section>

<section id="tool-rotate" class="tool-section">
<h2>تدوير الصفحات</h2>
<input type="file" id="rotate-file" accept=".pdf">
<select id="rotate-degree">
<option value="90">90°</option>
<option value="180">180°</option>
<option value="270">270°</option>
</select>
<button id="btn-rotate" class="action-btn">تدوير الآن</button>
<div id="rotate-status" class="status"></div>
</section>

<section id="tool-watermark" class="tool-section">
<h2>إضافة علامة مائية نصية</h2>
<input type="file" id="watermark-file" accept=".pdf">
<input type="text" id="watermark-text" placeholder="النص">
<button id="btn-watermark" class="action-btn">إضافة الآن</button>
<div id="watermark-status" class="status"></div>
</section>

<section id="tool-delete-pages" class="tool-section"><h2>حذف صفحات</h2><p style="color:#dc2626;font-weight:bold;">قريبًا</p></section>
<section id="tool-extract-text" class="tool-section"><h2>استخراج النص</h2><p style="color:#dc2626;font-weight:bold;">قريبًا</p></section>
<section id="tool-extract-images" class="tool-section"><h2>استخراج الصور</h2><p style="color:#dc2626;font-weight:bold;">قريبًا</p></section>
<section id="tool-pdf-to-images" class="tool-section"><h2>PDF إلى صور</h2><p style="color:#dc2626;font-weight:bold;">قريبًا</p></section>

<button id="back-to-tools" class="action-btn" style="display:none;margin:3rem auto;">← العودة إلى الأدوات</button>
</main>

<footer class="footer"><div class="container"><p>© 2026 PdfSwift – جميع الحقوق محفوظة</p></div></footer>

<script>
const { PDFDocument, degrees, rgb, StandardFonts } = PDFLib;

// التنقل بين الأدوات
document.querySelectorAll('.tool-btn[data-tool]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const tool = btn.dataset.tool;
    if(!document.getElementById(`tool-${tool}`)) return;
    document.querySelectorAll('.tool-selector, .section-title, main>p').forEach(e=>e.style.display='none');
    document.getElementById(`tool-${tool}`).style.display='block';
    document.getElementById('back-to-tools').style.display='block';
  });
});

document.getElementById('back-to-tools').addEventListener('click',()=>{
  document.querySelectorAll('.tool-section').forEach(e=>e.style.display='none');
  document.getElementById('back-to-tools').style.display='none';
  document.querySelector('.tool-selector').style.display='grid';
  document.querySelector('.section-title').style.display='block';
  document.querySelector('main>p').style.display='block';
});

function downloadPDF(bytes,name){
  const a=document.createElement('a');
  a.href=URL.createObjectURL(new Blob([bytes],{type:'application/pdf'}));
  a.download=name; a.click();
}

// دمج PDF
document.getElementById('btn-merge').onclick=async()=>{
  const files=document.getElementById('merge-files').files;
  if(!files.length)return alert('اختر الملفات');
  const pdf=await PDFDocument.create();
  for(const f of files){
    const p=await PDFDocument.load(await f.arrayBuffer());
    (await pdf.copyPages(p,p.getPageIndices())).forEach(pg=>pdf.addPage(pg));
  }
  downloadPDF(await pdf.save(),'merged.pdf');
  document.getElementById('merge-status').textContent='تم الدمج';
};

// تقسيم PDF
document.getElementById('btn-split').onclick=async()=>{
  const file=document.getElementById('split-file').files[0];
  const ranges=document.getElementById('split-ranges').value;
  if(!file || !ranges)return alert('اختر الملف وحدد الصفحات');
  const src=await PDFDocument.load(await file.arrayBuffer());
  const out=await PDFDocument.create();
  ranges.split(',').forEach(r=>{
    if(r.includes('-')){
      let [s,e]=r.split('-').map(n=>parseInt(n)-1);
      for(let i=s;i<=e;i++) out.addPage(src.getPage(i));
    } else out.addPage(src.getPage(parseInt(r)-1));
  });
  downloadPDF(await out.save(),'extracted.pdf');
  document.getElementById('split-status').textContent='تم الاستخراج';
};

// تدوير PDF
document.getElementById('btn-rotate').onclick=async()=>{
  const file=document.getElementById('rotate-file').files[0];
  const deg=parseInt(document.getElementById('rotate-degree').value);
  if(!file)return alert('اختر الملف');
  const pdf=await PDFDocument.load(await file.arrayBuffer());
  pdf.getPages().forEach(p=>p.setRotation(degrees(p.getRotation().angle+deg)));
  downloadPDF(await pdf.save(),'rotated.pdf');
  document.getElementById('rotate-status').textContent='تم التدوير';
};

// علامة مائية
document.getElementById('btn-watermark').onclick=async()=>{
  const file=document.getElementById('watermark-file').files[0];
  const text=document.getElementById('watermark-text').value;
  if(!file || !text)return alert('اختر الملف واكتب النص');
  const pdf=await PDFDocument.load(await file.arrayBuffer());
  const font=await pdf.embedFont(StandardFonts.HelveticaBold);
  pdf.getPages().forEach(p=>{
    const {width,height}=p.getSize();
    p.drawText(text,{x:width/4,y:height/2,size:40,font,color:rgb(.7,.7,.7),rotate:degrees(-45),opacity:.4});
  });
  downloadPDF(await pdf.save(),'watermarked.pdf');
  document.getElementById('watermark-status').textContent='تمت الإضافة';
};
</script>

</body>
</html>
